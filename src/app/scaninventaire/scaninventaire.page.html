<ion-header class="ion-no-border">
  <ion-toolbar>
    <br>
    <ion-item lines="none">
      <ion-buttons slot="start">
        <ion-button *ngIf="showCamera" (click)="turnOnTorch()">
          <ion-icon name="flash" style="font-size:30pt"></ion-icon>
        </ion-button>
      </ion-buttons>
      
      <ion-title>
       
      </ion-title>
      
      <ion-buttons slot="start" (click)="closeCamera2()" style="margin-top: 15px;">
        <ion-back-button text="Scanner" icon="list" color="danger" fill="outline"> </ion-back-button>
      </ion-buttons>
      
      <ion-buttons slot="end"  style="margin-top: 15px;" >
        <ion-button (click)="closeCamera()">
          <ion-icon name="close" size="large" style="color: #000;"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-item>
    
    <ion-segment [(ngModel)]="selectedTab">
      <ion-segment-button value="inventory">
        Inventaire <br>
        <ion-icon name="checkmark" style="color: #000;"></ion-icon>
        {{totallus}} pieces lus
      </ion-segment-button>
      <ion-segment-button value="reports">
        Entrer Code
        <ion-icon name="list"></ion-icon>
      </ion-segment-button>
    </ion-segment>
    
  </ion-toolbar>
</ion-header>



<ion-content>

  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content
      pullingIcon="arrow-dropdown"
      pullingText="Pull to refresh"
      refreshingSpinner="circles"
      refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>

  <div *ngIf="selectedTab === 'inventory'">
    <ion-list>
      <ion-item-sliding *ngFor="let customer of customers">
     
      

        <ion-item-options side="start">
          <ion-item-option style="margin-top: 35px;font-weight: bold;" color="danger" (click)="delCustomers(customer.num_sale)">Annuler</ion-item-option>
        </ion-item-options>
     
        <ion-item style="background-color: #fcb800">
          <ion-icon  name="image" slot="start"></ion-icon>
          <ion-label>
            <h2 style="font-weight: bold;color: #000;">REF : {{customer.item_id}} / {{customer.name}}</h2>
            <h2 style="font-weight: bold;color: #000;">CAT : {{customer.category}}</h2>
            <h2 style="font-weight: bold;color: #000;">location : {{customer.location_id}}</h2>
            <h2 *ngIf="customer.deleted == 0 " style="font-weight: bold;color: green;">En stock</h2>
            <h2 *ngIf="customer.deleted == 1 " style="font-weight: bold;color: red;">Supprimé</h2>
            <h2 *ngIf="customer.sale_status == 0 " style="font-weight: bold;color: green;">Vendu : le {{customer.sale_time}}</h2>
          
            <h2>
              <ion-icon *ngIf="customer.etatbijoux === 'N'" name="close" color="danger"></ion-icon>
              <ion-icon *ngIf="customer.etatbijoux === 'OK'" name="checkmark" color="success"></ion-icon>
            </h2>
            
        

        
            <p style="font-weight:bold;color: #000;">Poids :  {{customer.poids}} ( g ) / Qte :{{customer.quantity}}</p>
          </ion-label>
        </ion-item>
     
      
        
  
        <ion-item-options side="end">
  
          <ion-item-option style="display: none;" color="secondary" (click)="showCustomer(customer.num_sale,customer.name,customer.item_unit_price)">Voir</ion-item-option>
       
          <ion-item-option (click)="updateCustomer(customer.num_sale,customer.name,customer.item_unit_price,customer.prix_vente_g,customer.poids,customer.location_id)" style="margin-top: 35px;font-weight: bold;" color="success">Prix de vente</ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
  
  
    </ion-list>
  </div>
  
  <div *ngIf="selectedTab === 'reports'">
    <ion-item>
      <ion-label>Entrer Code</ion-label>
      <ion-input type="tel"  [(ngModel)]="item_id"> </ion-input>
    </ion-item>
  <ion-item>
    <ion-button (click)="createdProses5(item_id)">Valider</ion-button>
  </ion-item>
  
    
  </div>

  <div>
   
    <ion-button expand="block" (click)="scanBarcode()" style="display: none;">
      <ion-icon slot="start" name="qr-scanner"></ion-icon>
      Scanner un bijoux
    </ion-button>
    <ion-button expand="block" (click)="verifCode()" style="display: none;">
      <ion-icon slot="start" name="qr-scanner"></ion-icon>
      Verifier Code
    </ion-button>
    <ion-item style="display: none;">
      <ion-label position="floating" >  </ion-label>
      <ion-input [(ngModel)]="codeacces">{{codeacces}}</ion-input>
    </ion-item>
    <ion-item style="display: none;">
      <ion-label position="floating"> Ref Produit </ion-label>
      <ion-input type="number"  [(ngModel)]="item_id">{{ textScanned }}</ion-input>
    </ion-item>
  
  
  
  
    
  
    <ion-button  style="display: none;" expand="block" padding color="tertiary" *ngIf="!id" (click)="createdProses()" fill="outline">Valider</ion-button>
    <ion-button expand="block" padding color="tertiary" *ngIf="id>=1" (click)="updateProses()" fill="outline">Modifier</ion-button>
  
  </div>
  
  
  

</ion-content>

<ion-footer class="footer">
  <ion-grid>
    <ion-row>
  
    <ion-col style="text-align: center"><ion-button *ngIf="totallus>0"  (click)="validertableau()" expand="block" shape="round" color="danger"><ion-icon name="send"> </ion-icon> Valider le plateau </ion-button></ion-col>
    <ion-col style="text-align: center"><ion-button  (click)="closeCamera2()" expand="block" shape="round" color="danger"><ion-icon name="qr-scanner"> </ion-icon> Démarrer l'inventaire </ion-button></ion-col>
  
    </ion-row>
  </ion-grid>
</ion-footer>
